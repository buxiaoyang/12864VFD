板上资源:
MCU:STM32F103C8T6
Dataflash:AT45DB161D(16Mbit-2MByte)
VFD:GP1211AI(128*64点阵)
未使用的IO用测试点的方式引出
PCB尺寸:6.2cm*10cm


目前支持的功能:
1.5*7点ASCII字符显示
2.8*16点ASCII字符显示
3.16*16汉字显示(GB2312)
4.Flash数据下载
5.Flash数据读取
6.全显示
7.全灭
8.过压保护(硬件)
9.VFD电开关功能(含一个机械式开关,以防止调试程序时损坏VFD)
10.调试接口:SWD,支持串口方式程序下载


接口说明:
1.日前仅支持串口方式通讯
2.SPI接口需后期更新
3.USB接口需后期更新

指令说明:
1.显示测试画面:0x01
20 01 00 01 03
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | CMD | LEN |             DATA              | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | 01  | 00  |             None              | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+

2.全显示:0xFF
20 FF 00 FF 03
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | CMD | LEN |             DATA              | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | FF  | 00  |             None              | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+

3.全关闭:0x00
20 00 00 00 03
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | CMD | LEN |             DATA              | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | 00  | 00  |             None              | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+

4.显示5*7字符串:0x10
20 10 LEN X坐标 Y坐标 要显示的字符串 XOR 03
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | CMD | LEN | x    y     string             | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | 10  | LEN | xx   xx    data               | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
LEN:要显示的字符串+2(X,Y)
X坐标:0-122
Y坐标:0-7
显示字符:0x20-0x7F

5.显示16*8or16*16字符or汉字:0x11
20 10 LEN X坐标 Y坐标 显示字符 XOR 03
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | CMD | LEN | x    y     string             | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | 11  | LEN | xx   xx    data               | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
LEN:要显示的字符串+2(X,Y)    注意:一个汉字为2个字节
X坐标:0-122
Y坐标:0-7
显示字符:GB2312内包含内容,后续可扩充

6.下载数据到DataFlash:0x60
20 60 04 0xXX 0xXX 0xXX 0xXX XOR ETX
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | CMD | LEN | start page   Page            | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | 60  | 04  | xx xx       xx xx             | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
LEN:4
Start Page:0-4095(0x00 0x00 - 0x0F 0xFF)
Page:0-4096(0x00 0x00 - 0x10 0x00)
Start Page + Page <= 4096
发送此命令后,使用超级终端Xmodem模式发送.

7.读取DataFlash:0x61
20 61 04 0xXX 0xXX 0xXX 0xXX XOR ETX
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | CMD | LEN | start page   Page            | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
    | STX | 61  | 04  | xx xx       xx xx             | XOR | ETX |
    +-----+-----+-----+-------------------------------+-----+-----+
LEN:4
Start Page:0-4095(0x00 0x00 - 0x0F 0xFF)
Page:0-4096(0x00 0x00 - 0x10 0x00)
Start Page + Page <= 4096
发送此命令后,直接从串发送数据.

解释:

STX + CMD + LEN + DATA + XOR + ETX
    STX:0x20
    CMD:指令字
    LEN:DATA长度
    ETX:0x03
    ACK:0x06
    XOR:除了STX,XOR,ETX以外的所有数据的异或校验码
模块收到正确的指令后先返回ACK(0x06)

先写这么多,有错误再更改.


补充一下,此次发售的模块为5V版本,USB接口可以直接供电.
试过一种很差很细的USB线,也能显示,只是亮度比较低.
配上淘金的那条线,是最好不过,如果没有线的朋友强烈建议一起把线也买了.


再补充一下:
目前的程序中,如果上电后约10秒钟没有数据(任意数据)输入,会关闭显示内容,但VFD的驱动电源仍在工作中.
其实我想如果几分钟显示内容没有更新,把驱动电源也关掉的,但是懒了一下,就没有更新到程序中.

所有的相关资料已经公开,后面的软件请大家各自按自己的想法加入相应的功能,如果觉得不错就分享给大家一下.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------